<!-- eslint-disable @angular-eslint/template/click-events-have-key-events -->
<!-- eslint-disable @angular-eslint/template/interactive-supports-focus -->
<div class="flex flex-col w-full" [class.dark]="themeService.theme() === 'dark'" [class.bg-[#0e0f11]]="themeService.theme() === 'dark'">
  <!-- Tab Navigation -->
  <div class="w-full border-none shadow-none relative flex items-center justify-center" [class.bg-transparent]="themeService.theme() === 'dark'">
    <div class="p-0">
      <div class="relative">
        <!-- Hover Highlight -->
        <div 
          class="absolute h-[30px] transition-all duration-300 ease-out bg-[#0e0f1114] dark:bg-[#ffffff1a] rounded-[6px] flex items-center"
          [style.left]="hoverStyle()['left']"
          [style.width]="hoverStyle()['width']"
          [style.opacity]="hoveredTabId() !== null ? 1 : 0">
        </div>

        <!-- Active Indicator -->
        <div 
          class="absolute bottom-[-6px] h-[2px] bg-[#0e0f11] dark:bg-white transition-all duration-300 ease-out"
          [style.left]="activeStyle()['left']"
          [style.width]="activeStyle()['width']">
        </div>

        <!-- Tabs -->
        <div class="relative flex space-x-[6px] items-center">
          @for (tab of tabs; track tab.id) {
            <div 
              #tabRef
              class="px-3 py-2 cursor-pointer transition-colors duration-300 h-[30px]"
              [class.text-[#0e0e10]]="tab.id === activeTabIdSignal() && themeService.theme() !== 'dark'"
              [class.dark:text-white]="tab.id === activeTabIdSignal() && themeService.theme() === 'dark'"
              [class.text-[#0e0f1199]]="tab.id !== activeTabIdSignal() && themeService.theme() !== 'dark'"
              [class.dark:text-[#ffffff99]]="tab.id !== activeTabIdSignal() && themeService.theme() === 'dark'"
              (mouseenter)="onMouseEnter(tab.id)"
              (mouseleave)="onMouseLeave()"
              (click)="setActiveTab(tab.id)">
              <div class="text-sm font-[var(--www-mattmannucci-me-geist-regular-font-family)] leading-5 whitespace-nowrap flex items-center justify-center h-full">
                {{ tab.label }}
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  </div>

  <!-- Tab Content -->
  <div class="w-full">
    @for (tab of tabs; track tab.id) {
      <div [class.hidden]="tab.id !== activeTabIdSignal()">
        <ng-container *ngTemplateOutlet="tabContent; context: { $implicit: tab.id }"></ng-container>
      </div>
    }
  </div>
</div>

<ng-template #tabContent let-tabId>
  <ng-container *ngTemplateOutlet="content; context: { $implicit: tabId }"></ng-container>
</ng-template>

<ng-template #content let-tabId>
  <ng-content [ngTemplateOutletContext]="{ $implicit: tabId }"></ng-content>
</ng-template>
  